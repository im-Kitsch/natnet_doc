

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>NatNet Message definition &mdash; natnet_bridge 1.00 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/collapsible-lists/css/tree_view.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Other Resources" href="08.Other%20Resources.html" />
    <link rel="prev" title="Some details" href="01_other_details.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> natnet_bridge
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="00_use_natnet_bridge.html">Quick start for natnet_bridge</a></li>
<li class="toctree-l1"><a class="reference internal" href="00_use_natnet_bridge.html#comparison-with-prior-optitrack-bridge">Comparison with prior optitrack_bridge</a></li>
<li class="toctree-l1"><a class="reference internal" href="01_other_details.html">Some details</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">NatNet Message definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="08.Other%20Resources.html">Other Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="15_possible%20future%20work.html">Advices future work</a></li>
<li class="toctree-l1"><a class="reference internal" href="20_optitrack_bridge.html">Use optitrack bridge</a></li>
<li class="toctree-l1"><a class="reference internal" href="25_draft.html">not documented things</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_build_api/library_root.html">Library API</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">natnet_bridge</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>NatNet Message definition</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/pages/05_msg_def.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="natnet-message-definition">
<h1>NatNet Message definition<a class="headerlink" href="#natnet-message-definition" title="Permalink to this headline">¶</a></h1>
<p>To publish a complete natnet dataframe, we use a customized ros message named <code class="docutils literal notranslate"><span class="pre">NatNetFrame</span></code> .
The structure of message followed the protocol of NatNet. You can check it via run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rosmsg show natnet_bridge/NatNetFrame
</pre></div>
</div>
<p>The documentation of ROS Style are here</p>
<dl>
<dt>–<a class="reference external" href="./../_static/index-msg.html">Customized definition of natnet_pkg</a></dt><dd><p>– <a class="reference external" href="./../_static/index-msg.html">NatNetFrame</a></p>
<p>– <a class="reference external" href="./../_static/index-msg.html">MarkerSet</a></p>
<p>– <a class="reference external" href="./../_static/index-msg.html">LabeledMarker</a></p>
<p>– <a class="reference external" href="./../_static/index-msg.html">RigidBody</a></p>
<p>– <a class="reference external" href="./../_static/index-msg.html">Skeleton</a></p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Motive changes the interfaces time by time.
So not all members in the <code class="docutils literal notranslate"><span class="pre">NatNetFrame</span></code> is supported for all natnet versions.
Also not all information in protocol are parsed in NatNetFrame. E.g. the force plate is not
used so it is ignored. Also the software latency is not used, since Motive doesn’t
have documentations about time definitions, so the time latency information is also given up.</p>
<p>So if you want to know more detail about the protocol,
you have to check function <em>unpack()</em> both in <em>natnet_bridge/src/unpack.cpp</em> and
in NatNet SDK(Windows)’s example, <em>Packet Client</em>,
which is not supported in Linux but there is only example on Windows Platform.</p>
</div>
<p>A concise description of message definition is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">std_msgs</span><span class="o">/</span><span class="n">Header</span> <span class="n">header</span> <span class="c1">#  standard for ros</span>
    <span class="n">uint32</span> <span class="n">seq</span>
    <span class="n">time</span> <span class="n">stamp</span>
    <span class="n">string</span> <span class="n">frame_id</span>
<span class="n">string</span> <span class="n">reference_frame</span>  <span class="c1"># default: &#39;optitrack&#39;, this is the &#39;world&#39; frame of motive</span>
<span class="n">int32</span> <span class="n">natnet_frame_number</span> <span class="c1"># defined by natnet</span>
<span class="n">natnet_bridge</span><span class="o">/</span><span class="n">MarkerSet</span><span class="p">[]</span> <span class="n">marker_sets</span>
    <span class="n">string</span> <span class="n">name</span>
    <span class="n">int32</span> <span class="n">n_markers</span>
    <span class="n">natnet_bridge</span><span class="o">/</span><span class="n">PointFloat32</span><span class="p">[]</span> <span class="n">markers</span>
        <span class="n">float32</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>
<span class="n">natnet_bridge</span><span class="o">/</span><span class="n">PointFloat32</span><span class="p">[]</span> <span class="n">unidentified_markers</span>
    <span class="n">float32</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>
<span class="n">natnet_bridge</span><span class="o">/</span><span class="n">RigidBody</span><span class="p">[]</span> <span class="n">rigid_bodies</span>
    <span class="n">int32</span> <span class="nb">id</span>
    <span class="n">natnet_bridge</span><span class="o">/</span><span class="n">PoseFloat32</span> <span class="n">pose</span>
        <span class="n">natnet_bridge</span><span class="o">/</span><span class="n">PointFloat32</span> <span class="n">position</span>
            <span class="n">float32</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>
        <span class="n">natnet_bridge</span><span class="o">/</span><span class="n">QuaternionFloat32</span> <span class="n">orientation</span>
            <span class="n">float32</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">w</span>
    <span class="n">float32</span> <span class="n">error</span>
    <span class="nb">bool</span> <span class="n">track_valid</span>
<span class="n">natnet_bridge</span><span class="o">/</span><span class="n">Skeleton</span><span class="p">[]</span> <span class="n">skeletons</span>
    <span class="n">int32</span> <span class="nb">id</span>
    <span class="n">int32</span> <span class="n">n_rigid_bodies</span>
    <span class="n">natnet_bridge</span><span class="o">/</span><span class="n">RigidBody</span><span class="p">[]</span> <span class="n">rigid_bodies</span>
        <span class="n">int32</span> <span class="nb">id</span>
        <span class="n">natnet_bridge</span><span class="o">/</span><span class="n">PoseFloat32</span> <span class="n">pose</span>
            <span class="n">natnet_bridge</span><span class="o">/</span><span class="n">PointFloat32</span> <span class="n">position</span>
                <span class="n">float32</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>
            <span class="n">natnet_bridge</span><span class="o">/</span><span class="n">QuaternionFloat32</span> <span class="n">orientation</span>
                <span class="n">float32</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">w</span>
        <span class="n">float32</span> <span class="n">error</span>
        <span class="nb">bool</span> <span class="n">track_valid</span>
<span class="n">natnet_bridge</span><span class="o">/</span><span class="n">LabeledMarker</span><span class="p">[]</span> <span class="n">labeled_markers</span>
<span class="n">natnet_bridge</span><span class="o">/</span><span class="n">LabeledMarker</span><span class="p">[]</span> <span class="n">unlabeled_markers</span>
    <span class="n">int32</span> <span class="n">model_id</span>
    <span class="n">int32</span> <span class="n">marker_id</span>
    <span class="n">natnet_bridge</span><span class="o">/</span><span class="n">PointFloat32</span> <span class="n">position</span>
        <span class="n">float32</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>
    <span class="n">float32</span> <span class="n">size</span>
    <span class="nb">bool</span> <span class="n">b_occluded</span>
    <span class="nb">bool</span> <span class="n">b_pc_solved</span>
    <span class="nb">bool</span> <span class="n">b_model_solved</span>
    <span class="nb">bool</span> <span class="n">b_has_model</span>
    <span class="nb">bool</span> <span class="n">b_unlabeled</span>
    <span class="nb">bool</span> <span class="n">b_activeMarker</span>
    <span class="n">float32</span> <span class="n">residual</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="08.Other%20Resources.html" class="btn btn-neutral float-right" title="Other Resources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="01_other_details.html" class="btn btn-neutral float-left" title="Some details" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Zhiyuan Hu.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>